"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[61],{55061:(e,t,i)=>{i.d(t,{qJ:()=>L,P6:()=>T,XW:()=>U,oP:()=>S,rn:()=>j,iR:()=>E,gt:()=>x,_2:()=>G,kU:()=>W,Wy:()=>O,_u:()=>q,W9:()=>z,c_:()=>F,pF:()=>J,Bg:()=>H});i(33948);var a=i(96486),o=i.n(a),s=i(5366),n=i(66897),r=i(17215),l=i(41432),u=i(15070),c=i(99036),d=i(80951),p=i(57269),m=i(32918),f=i(6695),g=i(2665),h=i(22808),b=i(39336),N=i(26825),y=i(21202),P=i(77420),M=i(6287),v=i(75246),R=i(29369),k=i(19889),_=i(99108),V=i(9900),w=i(97880),Z=i(63143);const L=(0,s.defineMessages)({defaultPluralizedUserNames:{defaultMessage:"Someone",id:"pushNotification.pluralizedUserNames.defaultLabel"},defaultPermissionGroupName:{defaultMessage:"Deleted group",id:"pushNotification.permissionGroupName.defaultLabel"},defaultPageName:{defaultMessage:"a Notion page",id:"pushNotification.pageName.defaultLabel",description:"Label for a default Notion page title when it is empty."},untitledPermissionGroupName:{defaultMessage:"Untitled group",id:"pushNotification.permissionGroupName.untitledLabel"},userEditedPermissionGroup:{defaultMessage:"{userName} edited {permissionGroupName}",id:"pushNotification.userEditedTarget.label"},userDeletedPermissionGroup:{defaultMessage:"{userName} deleted {permissionGroupName}",id:"pushNotification.userDeletedTarget.label"},userCreatedPermissionGroup:{defaultMessage:"{userName} created {permissionGroupName}",id:"pushNotification.userCreatedTarget.label"},unknownAuthor:{defaultMessage:"Unknown author",id:"pushNotification.authorPhrase.unknown"},untitledSpaceName:{defaultMessage:"Untitled",id:"pushNotification.untitledSpaceName.label"},untitledTeamName:{defaultMessage:"Untitled",id:"pushNotification.untitledTeamName.label",description:"The name used in case the team's name is not known"},untitledCollectionName:{defaultMessage:"Untitled",id:"pushNotification.untitledCollectionName.placeholder"},untitledBlockTitle:{defaultMessage:"Untitled",id:"pushNotification.untitledBlockTitle.placeholder"},twoUserNames:{defaultMessage:"{firstAuthor} and {secondAuthor}",id:"pushNotification.twoUserNames.label"},threePlusUserNames:{defaultMessage:"{othersCount, plural, one {{firstAuthor} and {othersCount} other} other {{firstAuthor} and {othersCount} others}}",id:"pushNotification.threePlusUserNames.label"},editorPermissionLabel:{defaultMessage:"Full access",id:"pushNotifications.editorPermissionLevel.label"},readerPermissionLabel:{defaultMessage:"Read only",id:"pushNotifications.readerPermissionLevel.label"},editOnlyPermissionLabel:{defaultMessage:"Edit only",id:"pushNotifications.editOnlyPermissionLevel.label"},editPermissionLabel:{defaultMessage:"Edit",id:"pushNotifications.editPermissionLevel.label"},commentOnlyPermissionLabel:{defaultMessage:"Comment only",id:"pushNotifications.commentOnlyPermissionLevel.label"},noAccessPermissionLabel:{defaultMessage:"No access",id:"pushNotifications.noAccessPermissionLevel.label"},publicPermissionRoleLabel:{defaultMessage:"Public ({permissionLevel})",id:"pushNotifications.publicPermissions.label",description:"Label for the public permission level of this page."},userNameWithRole:{defaultMessage:"{userName} ({permissionLevel})",id:"pushNotifications.userPermissionsWithRole.label",description:"Label for the permission level this user has."},botNameWithRole:{defaultMessage:"{botName} ({permissionLevel})",id:"pushNotifications.botPermissionsWithRole.label",description:"Label for the permission level this bot has. For example 'MyBot (Mixed Access)'"},spaceNameWithRole:{defaultMessage:"{spaceName} ({permissionLevel})",id:"pushNotifications.spacePermissionsWithRole.label",description:"Label for the permission level that members of this workspace have."},imageInPushNotification:{defaultMessage:"{imageEmoji} Image",id:"pushNotification.imageInPushNotification.placeholder"},topLevelBlockCreated:{defaultMessage:"{userName} created {targetName} in {spaceName}",id:"pushNotification.userCreatedBlockInSpace.message"},topLevelBlockDeleted:{defaultMessage:"{userName} deleted {targetName} in {spaceName}",id:"pushNotification.userDeletedBlockInSpace.message"},collectionRowCreated:{defaultMessage:"{userName} created {targetName} in {collectionName}",id:"pushNotification.userCreatedRowInCollection.message"},collectionRowDeleted:{defaultMessage:"{userName} deleted {targetName} in {collectionName}",id:"pushNotification.userDeletedRowInCollection.message"},emptyBlockEditedProperty:{defaultMessage:"Empty",id:"pushNotification.emptyBlockPropertyValueEdited.placeholderLabel"},propertyNameAndValueEdited:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationSubject",description:"The push notification message sent when a collection property value is edited."},propertyNameAndValueNotificationBody:{defaultMessage:"{propertyName} ({propertyValue})",id:"pushNotification.propertyNameWithEditedValue.notificationBody",description:"The push notification message body sent when a collection property value is edited."},blockDeletedEditBody:{defaultMessage:"[Deleted] {renderedBlock}",id:"pushNotification.deletedBlock.notificationContents",description:"The push notification message contents sent to the user when a block is deleted."},blockEditedNotification:{defaultMessage:"{userName} edited {blockName}",id:"pushNotification.blockEdited.notificationSubject"},userEditedPermissionsFor:{defaultMessage:"{userName} edited permissions for {targetName}",id:"pushNotifications.permissionsEditedForPageOrSpace.notificationSubject",description:"Title of the notification sent when a user edits permissions for a page or a workspace."},userMentionedIn:{defaultMessage:"{userName} mentioned you in {targetName}",id:"pushNotifications.userMentionedInPage.notificationSubject",description:"Title of the notification sent when a user is mentioned in a page."},userDeletedComment:{defaultMessage:"[Deleted]💬 {commentText}",id:"pushNotifications.userDeletedCommentText.notificationContents"},userCommentedSubject:{defaultMessage:"{userName} commented in {targetName}",id:"pushNotifications.userCommentedSubject.notificationSubject"},userAddedToSpace:{defaultMessage:"{userName} added you to {workspaceName}",id:"pushNotifications.userAddedToSpace.notificationSubject",description:"Notification sent to the user when they have been added to a new workspace."},userInvitedToSpace:{defaultMessage:"{userName} invited you to {workspaceName}",id:"pushNotifications.userInvitedToSpace.notificationSubject",description:"Notification sent to the user when they have been invited to a new workspace."},userInvitedToSpaceByBot:{defaultMessage:"You have been invited to {workspaceName}",id:"pushNotifications.userInvitedToSpaceByBot.notificationSubject",description:"Notification sent to the user when they have been invited to a new workspace through the API."},userEditedCollectionSubject:{defaultMessage:"{userName} edited {collectionName}",id:"pushNotifications.collectionEdited.notificationSubject"},userCreatedCollectionSubject:{defaultMessage:"{userName} created {collectionName}",id:"pushNotifications.collectionCreated.notificationSubject"},collectionDescriptionDeleted:{defaultMessage:"{userName} deleted the description for {collectionName}",id:"pushNotifications.collectionDescriptionDeleted.notificationSubject"},collectionDescriptionCreated:{defaultMessage:"{userName} added a description for {collectionName}",id:"pushNotifications.collectionDescriptionAdded.notificationSubject"},untitledCollectionView:{defaultMessage:"Untitled",id:"pushNotifications.untitledCollection.label"},collectionViewEditedSubject:{defaultMessage:"{userName} edited view {collectionViewName} in {collectionName}",id:"pushNotifications.collectionViewEdited.notificationSubject"},collectionPropertyEditedUnknown:{defaultMessage:"Unknown",id:"pushNotifications.unknownCollectionPropertyName.label"},collectionPropertyEditedSubject:{defaultMessage:"{userName} edited property {propertyType} in {collectionName}",id:"pushNotifications.collectionPropertyEdited.subject",description:"Subject of the notification sent when a property type in a collection's columns are changed."},reminderSubject:{defaultMessage:"Reminder in {pageName}",id:"pushNotifications.reminderChanged.subject"},pageLockedActivity:{defaultMessage:"{userName} locked {pageName}",id:"pushNotifications.pageLocked.subject"},pageUnlockedActivity:{defaultMessage:"{userName} unlocked {pageName}",id:"pushNotifications.pageUnlocked.subject"},emailEditedActivity:{defaultMessage:"{userName} edited their account settings",id:"pushNotifications.emailAccountSettingsEdited.subject"},emptyPropertyBody:{defaultMessage:"Empty",id:"pushNotifications.emptyPropertyValueInCollection.label"},unknownRelationValueChange:{defaultMessage:"Unknown",id:"pushNotifications.unknownRelationPropertyChanged.label"},unknownAuthorInPropertySchemaChange:{defaultMessage:"Unknown author",id:"pushNotifications.unknownAuthorUpdatedProperty.label"},accessRequestedSubject:{defaultMessage:"{userName} requested access to {pageName}",id:"pushNotifications.accessRequested.subject"},blockFormatEditPageIconName:{defaultMessage:"Page Icon",id:"pushNotifications.formatChange.pageIcon.label"},pageIconImagePlaceholder:{defaultMessage:"Image",id:"pushNotifications.formatChange.pageIcon.imagePlaceholder"},pageDeletedActivity:{defaultMessage:"{userName} deleted {pageName}",id:"pushNotifications.pageDeleted.subject"},pageRestoredActivity:{defaultMessage:"{userName} restored {pageName}",id:"pushNotifications.pageRestored.subject"},pagePermanentlyDeletedActivity:{defaultMessage:"{userName} permanently deleted {pageName}",id:"pushNotifications.pagePermanentlyDeleted.subject"},userInvitedToTeam:{defaultMessage:"{userName} invited you to {teamName} team",id:"pushNotifications.userInvitedToTeam.notificationSubject",description:"Notification sent to the user when they have been invited to a new team."}});function T(e){const{activity:t,getRecordValue:i}=e,a=t.edits||[];return o().compact((0,Z.cf)(o().flatten(a.map((e=>e.authors||[])))).map((e=>{const t=i(e);if(t)return{table:e.table,value:t}})))}function U(e,t){const i=e.map((e=>e?(0,n.$4)(t,e):t.formatMessage(L.unknownAuthor)));return function(e,t){if(1===t.length)return t[0];if(2===t.length)return e.formatMessage(L.twoUserNames,{firstAuthor:t[0],secondAuthor:t[1]});if(t.length>2){const i=t.length-1;return e.formatMessage(L.threePlusUserNames,{othersCount:i,firstAuthor:t[0]})}return e.formatMessage(L.defaultPluralizedUserNames)}(t,i)}function C(e){const{blockValue:t,getRecordValue:i,userTimeZone:a,intl:o}=e;return r.kJ({table:y.iU,value:t,getRecordValue:i,placeholder:o.formatMessage(L.untitledBlockTitle),userTimeZone:a,intl:o})}function S(e){return function(e){const{activity:t,getRecordValue:i,userTimeZone:a,intl:o}=e,s=t.navigable_block_id||t.top_level_block_id||t.collection_row_id;if(s){const n=i({table:y.iU,id:s,spaceId:t.space_id});if(n){return{url:r.Om({table:y.iU,value:n,getRecordValue:e.getRecordValue,baseUrl:e.baseURL}),title:C({intl:o,blockValue:n,getRecordValue:i,userTimeZone:a})}}return{url:e.baseURL||"/",title:o.formatMessage(L.untitledBlockTitle)}}if(t.collection_id)return A(e);if("permission-group-edited"===t.type){const a=i({table:v.bx,id:t.space_id});return{title:X(o,F({activity:t,getRecordValue:i})),url:a?r.Om({table:v.bx,value:a,getRecordValue:e.getRecordValue,baseUrl:e.baseURL}):"/"}}if("user-invited"===t.type){const a=function(e){const{activity:t,getRecordValue:i}=e;if(!t.permission_group_id)return;return H({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordValue:i})}({activity:t,getRecordValue:i}),s=i({table:v.bx,id:t.space_id});if(s&&a)return{title:X(o,a),url:r.Om({table:v.bx,value:s,getRecordValue:e.getRecordValue,baseUrl:e.baseURL})}}else if("team-membership-edited"===t.type){const a=e.baseURL||"/";if(!t.team_id)return{url:a,title:o.formatMessage(L.untitledTeamName)};const s=i({table:R.e0,id:t.team_id}),n=i({table:v.bx,id:t.space_id});return{url:n?r.Om({table:v.bx,value:n,getRecordValue:e.getRecordValue,baseUrl:e.baseURL}):a,title:(null==s?void 0:s.name)||o.formatMessage(L.untitledTeamName)}}return I(e)}(e).title}function j(e){return I(e).title}function I(e){const{activity:t,getRecordValue:i,userTimeZone:a,intl:o}=e,s=i({table:v.bx,id:t.space_id});if(s){return{title:r.kJ({table:v.bx,value:s,getRecordValue:i,placeholder:o.formatMessage({defaultMessage:"Untitled",id:"pushNotifications.workspaceName.untitled.placeholder"}),userTimeZone:a,intl:o}),url:r.Om({table:v.bx,value:s,getRecordValue:e.getRecordValue,baseUrl:e.baseURL})}}return{url:e.baseURL||"/",title:o.formatMessage(L.untitledSpaceName)}}function E(e){return A(e).title}function A(e){const{activity:t,getRecordValue:i,userTimeZone:a,intl:o}=e;if(t.collection_id){const s=i({table:M.v,id:t.collection_id,spaceId:t.space_id});if(s){const t=r.kJ({table:M.v,value:s,getRecordValue:i,placeholder:o.formatMessage(L.untitledCollectionName),userTimeZone:a,intl:o});return{url:r.Om({table:M.v,value:s,getRecordValue:e.getRecordValue,baseUrl:e.baseURL}),title:t}}return{url:e.baseURL||"/",title:o.formatMessage(L.untitledCollectionName)}}return{url:e.baseURL||"/",title:o.formatMessage(L.untitledCollectionName)}}function D(e){if(e.blockValue.properties)return V.Xh({intl:e.intl,textValue:e.blockValue.properties.title,getRecordValue:e.getRecordValue,userTimeZone:e.userTimeZone})}function B(e,t){const i=(0,N.kD)(t,void 0);return e.formatMessage(i)}function x(e){let{userTimeZone:t,activity:i,getRecordValue:a,intl:s}=e;if(i.edits){const e=[];i.edits.forEach((t=>{"permission-created"===t.type?e.push(t.permission_data):"permission-deleted"===t.type?e.push({...t.permission_data,role:"none"}):"permission-restriction-created"===t.type||"permission-restriction-deleted"===t.type?(t.permission_data.calculated_changes||[]).forEach((t=>{let[i,a]=t;e.push(a)})):e.push(t.permission_data.after)}));const n=o().compact(e.sort(N._G).map((e=>{if("user_permission"===e.type){const t=a({table:k.KJ,id:e.user_id}),i=(0,k.Nz)(s,t),o=B(s,e.role);return s.formatMessage(L.userNameWithRole,{userName:i,permissionLevel:o})}if("space_permission"===e.type){const o=j({intl:s,activity:i,getRecordValue:a,userTimeZone:t}),n=B(s,e.role);return s.formatMessage(L.spaceNameWithRole,{spaceName:o,permissionLevel:n})}if("public_permission"===e.type){const t=B(s,e.role);return s.formatMessage(L.publicPermissionRoleLabel,{permissionLevel:t})}if("bot_permission"===e.type){const t=a({table:P.cZ,id:e.bot_id}),i=(0,u.Mh)(t),o=B(s,e.role);return s.formatMessage(L.botNameWithRole,{botName:i,permissionLevel:o})}})));return s.formatList(n,{type:"conjunction",style:"narrow"})}}function G(e){const{intl:t}=e;switch(e.blockValue.type){case l.ZP.text:case l.ZP.header:case l.ZP.subHeader:case l.ZP.subSubHeader:case l.ZP.factory:case l.ZP.equation:case l.ZP.code:return D(e);case l.ZP.toggle:return"▸ ".concat(D(e));case l.ZP.bulletedList:return"• ".concat(D(e));case l.ZP.numberedList:return"1. ".concat(D(e));case l.ZP.quote:return"“".concat(D(e),"”");case l.ZP.toDo:return(function(e){let{blockValue:t}=e;return d.Ml(t.properties&&t.properties.checked)}(e)?"✓ ":"▢ ")+D(e);case l.ZP.file:case l.ZP.bookmark:return"🔗 ".concat(D(e));case l.ZP.embed:case l.ZP.framer:case l.ZP.whimsical:case l.ZP.miro:case l.ZP.abstract:case l.ZP.sketch:case l.ZP.excalidraw:case l.ZP.replit:case l.ZP.hex:case l.ZP.deepnote:case l.ZP.tweet:case l.ZP.gist:case l.ZP.maps:case l.ZP.invision:case l.ZP.video:case l.ZP.audio:case l.ZP.image:return t.formatMessage(L.imageInPushNotification,{imageEmoji:"🖼"});case l.ZP.drive:return function(e){const{blockValue:t}=e,i=(0,f.v0)(t);return i&&i.title?i.title:C(e)}(e);case l.ZP.page:case l.ZP.collectionView:case l.ZP.collectionViewPage:return C(e);case l.ZP.tableRow:return function(e){var t;const{blockValue:i,getRecordValue:a,userTimeZone:o,intl:s}=e,n=a({table:i.parent_table,id:i.parent_id,spaceId:i.space_id});if(!n||!i)return;const r=i.properties,l=(null===(t=n.format)||void 0===t?void 0:t.table_block_column_order)||[];return l&&r?l.map((e=>V.Xh({textValue:r[e],getRecordValue:a,userTimeZone:o,intl:s}))).join(", "):void 0}(e)}}function W(e){const{getRecordValue:t,baseURL:i,userTimeZone:a,intl:o}=e,s=t({table:y.iU,id:e.blockId});if(s){if("page"===s.type&&s.parent_table===M.v){const n=t({table:M.v,id:s.parent_id,spaceId:s.space_id});if(n){const i=c.oC(n),a=i[e.property],r=a?a.name:void 0,l=O({property:e.property,schema:i,block:s,getRecordValue:t,userTimeZone:e.userTimeZone,baseURL:e.baseURL,intl:o})||o.formatMessage(L.emptyPropertyBody);return o.formatMessage(L.propertyNameAndValueNotificationBody,{propertyName:r,propertyValue:l})}return G({intl:o,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:a})}return G({intl:o,blockValue:s,getRecordValue:t,baseURL:i,userTimeZone:a})}}function O(e){const{property:t,schema:i,block:a,getRecordValue:o,userTimeZone:s,baseURL:r,intl:l}=e,f=i[t];if(!a.properties||!f)return;const h=a.properties[t];if(h){if("title"===f.type||"text"===f.type)return V.Xh({intl:l,textValue:h,getRecordValue:o,userTimeZone:s});if("select"===f.type){const e=i[t].options||[];return d.Sj(h,e)}if("multi_select"===f.type){const e=i[t].options||[];return l.formatList(d.uP(h,e),{type:"conjunction",style:"narrow"})}if("checkbox"===f.type)return d.Ml(h)?c.bx:c.HC;if("date"===f.type){const e=d.Gl(h);if(e)return(0,p.ZV)({allowRelativeDates:!0,intl:l,value:e,date_format:f.date_format,time_format:f.time_format,userTimeZone:s})}else{if("person"===f.type)return l.formatList(d.DW(h,f).map((e=>{let{table:t,id:i}=e;return t===k.KJ?(0,k.Nz)(l,o({table:t,id:i})):(0,u.Mh)(o({table:t,id:i}))})),{type:"conjunction",style:"narrow"});if("relation"===f.type){const e=d.j$({relationValue:d.rq(h),getRecordValue:o,propertySchema:f});return l.formatList(e.map(o).map((e=>e?C({intl:l,blockValue:e,getRecordValue:o,baseURL:r,userTimeZone:s}):l.formatMessage(L.unknownRelationValueChange))),{type:"conjunction",style:"narrow"})}if("number"===f.type){const e=d.VY(h);if(void 0!==e)return e.toString()}else{if("file"===f.type)return l.formatList(d.g(h).map((e=>e.name||e.url)),{type:"conjunction",style:"narrow"});if("url"===f.type||"phone_number"===f.type||"email"===f.type)return d.zB(h);if("formula"===f.type){const{formula:e}=i[t];if(e){const e=(0,g.AH)({schema:i,property:t,block:a,getRecordValue:o,userTimeZone:s,depth:0,intl:l,resultCache:{}});return m.U3(e)?(0,p.ZV)({allowRelativeDates:!0,intl:l,value:e,userTimeZone:s}):"boolean"==typeof e?e?c.bx:c.HC:(0,Z.hj)(e)?e.toString():e}}else{if("created_by"===f.type){if(!a.created_by_table||!a.created_by_id)return l.formatMessage(L.unknownAuthorInPropertySchemaChange);const e=o({table:a.created_by_table,id:a.created_by_id}),t=e&&{table:a.created_by_table,value:e};return t?(0,n.$4)(l,t):l.formatMessage(L.unknownAuthorInPropertySchemaChange)}if("created_time"===f.type)return(0,b.default)(a.created_time).tz(s).locale(l.locale).format("L");if("rollup"===f.type)return;if("last_edited_by"===f.type)return;if("last_edited_time"===f.type)return;if("status"===f.type){const e=i[t];return d.ZG(h,e)}(0,w.t1)(f)}}}}}function q(e){switch(e.formatProperty){case"page_icon":return e.intl.formatMessage(L.blockFormatEditPageIconName);default:return}}function z(e){const{formatProperty:t,block:i,getRecordValue:a,intl:o}=e;switch(t){case"page_icon":const e=r.Al({table:y.iU,value:i,getRecordValue:a});return e?(0,h.Z)(e.icon)?e.icon:o.formatMessage(L.pageIconImagePlaceholder):o.formatMessage(L.emptyBlockEditedProperty);default:return}}function F(e){const{activity:t,getRecordValue:i}=e;let a=H({spaceId:t.space_id,permissionGroupId:t.permission_group_id,getRecordValue:i});if(!a){const e=_.hI(t.edits||[])[0];a="permission-group-changed"===e.type?e.permission_group_data.after:e.permission_group_data}return a}function J(e){const{activity:t,intl:i,userName:a,targetName:o}=e,s=_.hI(t.edits||[])[0];return s?"permission-group-created"===s.type?i.formatMessage(L.userCreatedPermissionGroup,{userName:a,permissionGroupName:o}):"permission-group-deleted"===s.type?i.formatMessage(L.userDeletedPermissionGroup,{userName:a,permissionGroupName:o}):i.formatMessage(L.userEditedPermissionGroup,{userName:a,permissionGroupName:o}):i.formatMessage(L.userEditedPermissionGroup,{userName:a,permissionGroupName:o})}function H(e){const{spaceId:t,permissionGroupId:i,getRecordValue:a}=e,o=a({table:v.bx,id:t});return(o&&o.permission_groups||[]).find((e=>e.id===i))}function X(e,t){if(t){return[(0,h.Z)(t.icon)?t.icon:void 0,t.name||e.formatMessage(L.untitledPermissionGroupName)].filter(Boolean).join(" ")}return e.formatMessage(L.defaultPermissionGroupName)}}}]);